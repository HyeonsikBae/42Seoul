# sprite

---

cub3d의 map에는 4가지의 정보가 있다.

플레이어, 통로, 벽, 마지막으로 sprite.

sprite라고 해서 무엇인지 감이 안 잡힐 수 있겠지만 간단히 맵에 있는 장애물이라고 생각하면 된다.

cub3d를 구현하며 가장 어려웠던 부분이 이 부분인데, sprite는 벽과 달리 겹쳐보이는 것이 허용되어야 하기 때문이었다.

필자는 시야에 여러 sprite가 있다면 (겹치는 것을 포함하여) 멀리 있는 sprite부터 그리는 방법으로 진행하였다.

이렇게 할 경우, 멀리 있는 sprite 위에 가까이 있는 sprite가 덮어씌워지는 형태이기 때문에 윈도우에 올라오는 이미지는 정상적이다.

sprite 구현을 위해 기존 DDA 부분에 수정이 필요했다.

**stack 구조체를 선언하고, DDA에서 sprite도 감지하여 stack에 저장하는 것.**

x, y 절편에 부딪히는 모든 DDA에 대해 sprite를 저장하였다. 이 경우, 가까이 있는 것이 먼저 저장되었다.

그 후, x, y의 sprite가 저장된 stack을 비교하며 하나의 stack에 옮겨담고 중복을 제거하였다.

그 뒤는 벽을 그리는 것과 유사한 작업으로 sprite를 그리는 데에 큰 어려움이 없었다.

