# control event

---

cub3d는 wolfenstein을 모티브 삼아 진행하는 과제이니만큼, 해당 게임과 비슷한 event들을 처리해야 한다.

크게 나누면 3종류의 event를 감지하였고, 이에 대해 처리하였다.

1. 프로그램 윈도우의 종료 버튼 이벤트
   - PRESS_EXIT (17) 이벤트가 발생할 경우, 종료
2. ESC 버튼입력 이벤트
   - Mac의 keycode 중 ESC (53) 이벤트가 발생할 경우, 종료
3. player의 움직임에 해당하는 이벤트
   - 전, 후, 좌, 우 의 4방향 움직임과 좌, 우 2방향 회전에 대한 기능 구현

위 이벤트 중, 1번과 2번은 이벤트 발생 즉시 처리하지만, 3번은 조금 다르다.

지속적인 움직임을 위해 KEY가 눌려 있는 상태인 KEY_PRESS 상태를 감지하고, KEY가 떨어지는 상태인 KEY_RELEASE 상태가 되기 전까지 지속적으로 기능을 실행한다.

움직임의 경우, 해당 방향으로 움직일 수 있는경우엔 플레이어의 위치를 변경하고, 벽이나 스프라이트가 있어 움직이지 못하는 경우엔 플레이어의 위치를 변경하지 않도록 한다.

회전의 경우, 해당 방향으로 회전행렬을 곱해 플레이어의 시야를 변경하도록 한다

Mandatory에 명시되어 있지 않지만, 각 이벤트가 동시에 들어올 경우 이에 대한 처리를 모두 처리하도록 하였다. (W, D 가 눌러져 있을 경우 오른쪽 앞으로 이동)